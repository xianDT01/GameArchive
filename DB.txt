create database gamearchive;
use gamearchive;

CREATE TABLE Juegos (
    idJuego INT AUTO_INCREMENT PRIMARY KEY,
    nombre VARCHAR(100) NOT NULL,
    descripcion TEXT,
    fechaLanzamiento DATE,
    rutaCaratula VARCHAR(255),
    plataformas VARCHAR(255) NOT NULL 
);

CREATE TABLE Multimedia (
    idMultimedia INT AUTO_INCREMENT PRIMARY KEY,
    idJuego INT,
    tipo ENUM('imagen', 'video') NOT NULL,
    ruta VARCHAR(255) NOT NULL,
    FOREIGN KEY (idJuego) REFERENCES Juegos(idJuego)
);

CREATE TABLE Usuarios (
    idUsuario INT AUTO_INCREMENT PRIMARY KEY,
    nombre VARCHAR(50) NOT NULL,
    contraseña VARCHAR(255) NOT NULL,
    correo VARCHAR(100) NOT NULL,
    tipo_usuario ENUM('usuario', 'administrador') NOT NULL DEFAULT 'usuario'
);

CREATE TABLE Comentarios (
    idComentario INT AUTO_INCREMENT PRIMARY KEY,
    idUsuario INT,
    idJuego INT,
    comentario TEXT,
    FOREIGN KEY (idUsuario) REFERENCES Usuarios(idUsuario),
    FOREIGN KEY (idJuego) REFERENCES Juegos(idJuego)
);

CREATE TABLE Reseñas (
    idReseña INT AUTO_INCREMENT PRIMARY KEY,
    idUsuario INT,
    idJuego INT,
    calificacion INT,
    FOREIGN KEY (idUsuario) REFERENCES Usuarios(idUsuario),
    FOREIGN KEY (idJuego) REFERENCES Juegos(idJuego)
);

CREATE TABLE Foro (
    idForo INT AUTO_INCREMENT PRIMARY KEY,
    titulo VARCHAR(255) NOT NULL,
    descripcion TEXT,
    fechaCreacion TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    autor VARCHAR(50) NOT NULL,
    FOREIGN KEY (autor) REFERENCES Usuarios(nombre)
);

CREATE TABLE ForoComentarios (
    idComentario INT AUTO_INCREMENT PRIMARY KEY,
    idForo INT,
    idUsuario INT,
    comentario TEXT,
    fecha TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (idForo) REFERENCES Foro(idForo),
    FOREIGN KEY (idUsuario) REFERENCES Usuarios(idUsuario)
);

